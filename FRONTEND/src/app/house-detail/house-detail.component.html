


<div class="container text-center mt-5">
  <div class="row">
    <div class="col-8">
      <img class="img-fluid" src="/assets/img/SALON.jpg"
        alt="Foto salón">
    </div>
    <div class="col-4">
      <div>
        <img class="img-fluid" src="/assets/img/DORMITORIO2.jpg"
          alt="Foto habitación">
      </div>
      <div class="my-3">
        <img class="img-fluid" src="/assets/img/COCINA2.jpeg"
          alt="Foto cocina">
      </div>
    </div>
  </div>
</div>


<div class="container text-center mt-2 ml-4">
  <div class="row">
    
    <div class="col"><img src="https://cdn-icons-png.flaticon.com/128/11269/11269300.png" loading="lazy" alt="hogar "
      title="hogar " width="20" height="20">
      <p style="color: #f57d00;">Alquiler íntegro</p>
    </div>
    <!--  
    <div class="col"><i class="bi bi-people"></i>
      <p style="color: #ffc168;">Personas</p>
    </div>
    -->
    <div class="col">

      @if (house) {
        <div class="container text-center mt-1 ml-4" >
          <img src="https://cdn-icons-png.flaticon.com/128/13303/13303673.png" loading="lazy" alt="social "
            title="social " width="25" height="25">
          <p style="color: #f57d00"> {{house.price}} €</p>
          <div>
        </div>
        </div>
      }
    </div>
    <!--
    <div class="col"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation"
        focusable="false" style=" height: 14px; width: 14px; fill: currentcolor;">
        <path
          d="M28 2a2 2 0 0 1 2 1.85v9.99l1.85 5.54a3 3 0 0 1 .11.46l.03.24.01.24V30h-2v-2H2v2H0v-9.68a3 3 0 0 1 .09-.71l.06-.23L2 13.84V4a2 2 0 0 1 1.7-1.98L3.85 2H4zm2 20H2v4h28zm-1.39-6H3.4l-1.34 4h27.9zM28 4H4v10h2v-4a2 2 0 0 1 1.85-2H24a2 2 0 0 1 2 1.85V14h2zm-13 6H8v4h7zm9 0h-7v4h7z">
        </path>
      </svg>
      <p style="color: #ffc168;">Camas</p>
    </div>
     -->

    <div class="col"> <img src="https://cdn-icons-png.flaticon.com/128/637/637229.png" loading="lazy" alt="bañera "
        title="bañera " width="20" height="20">
        @if (house) {
          <div class="container text-center mt-1 ml-4" >
            <p style="color: #f57d00;"> Baños  {{house.bathrooms}}</p>
           
          </div>
        }
    </div>
    <div class="col"> <img src="https://cdn-icons-png.flaticon.com/128/5442/5442095.png" loading="lazy" alt="zona "
      title="zona " width="25" height="25">
      @if (house) {
        <div class="container text-center mt-1 ml-4" >
          <p style="color: #f57d00;"> {{house.meters}} m2</p>
         
        </div>
      }
  </div>
    
  <div class="col mt-3">
    @if (house) {
    <div class="d-grid gap-2">

      @if(!isLoggedIn){
        <button routerLink="/register" class="btn btn-outline-naranaja">Reservar</button>
      }@else {
        <button [routerLink]="['/booking', house.id, 'form']" class="btn btn-outline-naranaja">Reservar</button>
      }
    </div>
    } 
  </div>

<!--     <div class="col mt-3">
      @if (house) {
      <div class="d-grid gap-2">
        <button [routerLink]="['/booking', house.id, 'form']" class="btn btn-outline-naranaja">Reservar</button>
      </div>
      }
    </div> -->

  </div>
</div>


@if (house) {
  <div class="container px-4 py-3" >
    <h5 class="pb-1"> {{house.title}}, <em>{{house.address}}</em></h5>
   
  </div>
}


<div class="card mt-1 ml-4 naranja-border" style="margin-left: 120px; margin-right: 120px">

  <div class="container px-4 py-3" >
    
    <h5 class="pb-2 border-bottom">Características y servicios</h5>

    @if(house){

    <div class="row row-cols-4 mt-4 ">


      <div class="col d-flex align-items-start">
        <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
          <use xlink:href="#calendar3"></use>
        </svg>
        <div>
          <p> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation"
            focusable="false" style=" height: 24px; width: 24px; fill: currentcolor;">
            <path
              d="M28 2a2 2 0 0 1 2 1.85v9.99l1.85 5.54a3 3 0 0 1 .11.46l.03.24.01.24V30h-2v-2H2v2H0v-9.68a3 3 0 0 1 .09-.71l.06-.23L2 13.84V4a2 2 0 0 1 1.7-1.98L3.85 2H4zm2 20H2v4h28zm-1.39-6H3.4l-1.34 4h27.9zM28 4H4v10h2v-4a2 2 0 0 1 1.85-2H24a2 2 0 0 1 2 1.85V14h2zm-13 6H8v4h7zm9 0h-7v4h7z">
            </path>
          </svg>
          Habitaciones {{house.bedrooms}}</p>
      </div>
    </div>
    <div class="col d-flex align-items-start">
      <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
        <use xlink:href="#home"></use>
      </svg>
      <div>
        <p> <img src="https://cdn-icons-png.flaticon.com/128/637/637229.png" loading="lazy" alt="bañera "
            title="bañera " width="30" height="30">
          Baños {{house.bathrooms}}</p>
      </div >
    </div>
    <div class="col d-flex align-items-start">
      <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
        <use xlink:href="#speedometer2"></use>
      </svg>
      <div>
        <p> <img src="https://cdn-icons-png.flaticon.com/128/13303/13303673.png" loading="lazy" alt="social "
            title="social " width="30" height="30">
          Precio {{house.price}} €</p>
      </div>
    </div>
    <div class="col d-flex align-items-start">
      <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
        <use xlink:href="#toggles2"></use>
      </svg>
      <div>
        <p> <img src="https://cdn-icons-png.flaticon.com/128/5442/5442095.png" loading="lazy" alt="zona "
            title="zona " width="30" height="30">

          Metros {{house.meters}} m2</p>
      </div>
    </div>
    <div class="col d-flex align-items-start">
      <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
        <use xlink:href="#geo-fill"></use>
      </svg>
      <div>
        <p><img src="https://cdn-icons-png.flaticon.com/128/1076/1076877.png" loading="lazy" alt="huella "
          title="huella " width="25" height="25">
        @if (house.petFriendly) {
          PetFriendly <i class="bi bi-check2-circle fs-3 ms-2"></i>
        } @else {
          PetFriendly <i class="bi bi-x-circle fs-3 ms-2"></i>
        }
    </div>
  </div>
  <div class="col d-flex align-items-start">
    <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
      <use xlink:href="#tools"></use>
    </svg>
    <div>
      <p> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"
          style="height:32px; width:32px; fill:currentColor" aria-hidden="true" role="presentation"
          focusable="false">
          <path
          d="M24 26c.99 0 1.95.35 2.67 1 .3.29.71.45 1.14.5H28v2h-.23a3.96 3.96 0 0 1-2.44-1A1.98 1.98 0 0 0 24 28c-.5 0-.98.17-1.33.5a3.98 3.98 0 0 1-2.67 1 3.98 3.98 0 0 1-2.67-1A1.98 1.98 0 0 0 16 28c-.5 0-.98.17-1.33.5a3.98 3.98 0 0 1-2.67 1 3.98 3.98 0 0 1-2.67-1A1.98 1.98 0 0 0 8 28c-.5 0-.98.17-1.33.5a3.96 3.96 0 0 1-2.44 1H4v-2h.19a1.95 1.95 0 0 0 1.14-.5A3.98 3.98 0 0 1 8 26c.99 0 1.95.35 2.67 1 .35.33.83.5 1.33.5.5 0 .98-.17 1.33-.5A3.97 3.97 0 0 1 16 26c.99 0 1.95.35 2.67 1 .35.33.83.5 1.33.5.5 0 .98-.17 1.33-.5A3.98 3.98 0 0 1 24 26zm0-5c.99 0 1.95.35 2.67 1 .3.29.71.45 1.14.5H28v2h-.23a3.96 3.96 0 0 1-2.44-1A1.98 1.98 0 0 0 24 23c-.5 0-.98.17-1.33.5a3.98 3.98 0 0 1-2.67 1 3.98 3.98 0 0 1-2.67-1A1.98 1.98 0 0 0 16 23c-.5 0-.98.17-1.33.5a3.98 3.98 0 0 1-2.67 1 3.98 3.98 0 0 1-2.67-1A1.98 1.98 0 0 0 8 23c-.5 0-.98.17-1.33.5a3.96 3.96 0 0 1-2.44 1H4v-2h.19a1.95 1.95 0 0 0 1.14-.5A3.98 3.98 0 0 1 8 21c.99 0 1.95.35 2.67 1 .35.33.83.5 1.33.5.5 0 .98-.17 1.33-.5A3.97 3.97 0 0 1 16 21c.99 0 1.95.35 2.67 1 .35.33.83.5 1.33.5.5 0 .98-.17 1.33-.5A3.98 3.98 0 0 1 24 21zM20 3a4 4 0 0 1 4 3.8V9h4v2h-4v5a4 4 0 0 1 2.5.86l.17.15c.3.27.71.44 1.14.48l.19.01v2h-.23a3.96 3.96 0 0 1-2.44-1A1.98 1.98 0 0 0 24 18c-.5 0-.98.17-1.33.5a3.98 3.98 0 0 1-2.67 1 3.98 3.98 0 0 1-2.67-1A1.98 1.98 0 0 0 16 18c-.5 0-.98.17-1.33.5a3.98 3.98 0 0 1-2.67 1 3.98 3.98 0 0 1-2.67-1A1.98 1.98 0 0 0 8 18c-.5 0-.98.17-1.33.5a3.96 3.96 0 0 1-2.44 1H4v-2h.19a1.95 1.95 0 0 0 1.14-.5A3.98 3.98 0 0 1 8 16c.99 0 1.95.35 2.67 1 .35.33.83.5 1.33.5.5 0 .98-.17 1.33-.5a3.96 3.96 0 0 1 2.44-1H16v-5H4V9h12V7a2 2 0 0 0-4-.15V7h-2a4 4 0 0 1 7-2.65A3.98 3.98 0 0 1 20 3zm-2 13.52.46.31.21.18c.35.31.83.49 1.33.49a2 2 0 0 0 1.2-.38l.13-.11c.2-.19.43-.35.67-.49V11h-4zM20 5a2 2 0 0 0-2 1.85V9h4V7a2 2 0 0 0-2-2z">
        </path>
      </svg>
      @if (house.pool) {
        Piscina <i class="bi bi-check2-circle fs-3 ms-2"></i>
      } @else {
        Piscina <i class="bi bi-x-circle fs-3 ms-2"></i>
      }
      </div>
</div>
<div class="col d-flex align-items-start">
  <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
    <use xlink:href="#tools"></use>
  </svg>
  <div>
    <p> <img src="https://cdn-icons-png.flaticon.com/128/3248/3248590.png" loading="lazy" alt="jardín "
        title="jardín " width="30" height="30">
        @if (house.garden) {
          Jardín <i class="bi bi-check2-circle fs-3 ms-2"></i>
        } @else {
          Jardín <i class="bi bi-x-circle fs-3 ms-2"></i>
        }
      
  </div>
</div>
<div class="col d-flex align-items-start">
  <svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
    <use xlink:href="#tools"></use>
  </svg>
  <div>
    <p> <img src="https://cdn-icons-png.flaticon.com/128/11392/11392402.png" loading="lazy" alt="balcón "
      title="balcón " width="30" height="30">
      @if (house.terrace) {
        Terraza <i class="bi bi-check2-circle fs-3 ms-2"></i>
      } @else {
        Terraza <i class="bi bi-x-circle fs-3 ms-2"></i>
      }
    
</div>
</div>
<div class="col d-flex align-items-start">
<svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em">
  <use xlink:href="#tools"></use>
</svg>
<div>
  <p> <img src="https://cdn-icons-png.flaticon.com/128/3926/3926195.png" loading="lazy" alt="wifi "
      title="wifi " width="20" height="20" style="margin-right: 10px">
      @if (house.wifi) {
        Wifi <i class="bi bi-check2-circle fs-3 ms-2"></i>
      } @else {
        Wifi <i class="bi bi-x-circle fs-3 ms-2"></i>
      }
</div>

</div>
<div class="col d-flex align-items-start">
<svg class="bi text-body-secondary flex-shrink-0 me-3" width="1.75em" height="1.75em" >
  <use xlink:href="#tools"></use>
</svg>

<div > 
  <img src="https://cdn-icons-png.flaticon.com/128/12685/12685128.png" loading="lazy"
      alt="aire acondicionado " title="aire acondicionado " width="30" height="30" style="margin-right: 10px">
      @if (house.air) {
        A/A <i class="bi bi-check2-circle fs-3 ms-2"></i>
      } @else {
        A/A <i class="bi bi-x-circle fs-3 ms-2"></i>

      }

</div>



</div>


</div>
} @else {
<p>Casa no encontrada</p>
}
</div>
</div>

<div class="card mt-4 ml-4 naranja-border" style="position:relative; margin-left: 120px; margin-right: 120px">
<div class="container px-4 py-3" >
<h5 class="pb-2 border-bottom">Descripción </h5>
<p>{{house?.description}}</p>
</div>

</div>




 <div class="card mt-4 ml-4 naranja-border" style="position:relative; margin-left: 120px; margin-right: 120px">
  <div class="row">
          <!-- Columna para el formulario de comentarios -->
          <div class="col-6">
              <div class="container px-4 py-3">
                <h5 class="pb-2 border-bottom mt-1">Añade un comentario</h5>
                <!-- Formulario para añadir un nuevo comentario -->
                <form [formGroup]="ratingForm" (ngSubmit)="save()">
                  <!-- Input para la calificación -->
                  <div class="mb-3">
                    <ngb-rating formControlName="score" [max]="5">
                      <ng-template let-fill="fill" let-index="index">
                        <i class="bi-star{{ fill === 100 ? '-fill' : '' }} fs-5" style="color:#f57d00;"></i>
                      </ng-template>
                    </ngb-rating>
                  </div>
                  <!-- Textarea para el comentario -->
                  <div class="form-floating">
                    <textarea class="form-control" placeholder="Leave a comment here" id="comment" formControlName="comment" style="min-height:150px;"></textarea>
                    <label for="comment">Comentario de texto</label>
                  </div>
                  <!-- Botón para enviar el comentario -->
                  <button class="w-100 btn btn-outline-naranaja btn-lg mt-2" type="submit">Añadir comentario</button>
                </form>
            </div>
          </div>
      
          <!-- Columna para la lista de comentarios existentes -->
          <div class="col-6 ">
              <div class="container px-4 py-3">
                <!-- Título de la sección de comentarios existentes -->
                <h5 class="pb-2">Comentarios existentes</h5>
                <!-- Lista de comentarios -->
                <ul class="list-unstyled">
                  @for (rating of ratings; track rating.id) {
                    <li>
                      <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top" >
                        @if (rating.user?.photoUrl) {
                          <!-- <h5 class="pb-2">Avatar existente</h5> -->
                          <img class="rounded-circle" style="width: 80px; height: 80px;" [src]="'http://localhost:3000/uploads/' + rating.user?.photoUrl">
                        } @else {
                          <img class="bd-placeholder-img rounded-circle" src="/assets/img/Usuario2.png" style="width: 60px;">
                        }
                        <!-- Información del usuario y comentario -->
                        <div class="col-lg-8">
                          <h6 class="mb-0">
                            <!-- Calificación -->
                            <ngb-rating [(rate)]="rating.score" [readonly]="true" [max]="5">
                              <ng-template let-fill="fill" let-index="index">
                                <i class="bi-star{{ fill === 100 ? '-fill' : '' }} fs-5" style="color:#f57d00;"></i>
                              </ng-template>
                            </ngb-rating>
                            <!-- Fecha y usuario -->
                            {{rating.createdDate | date:'dd/MM/yyyy'}}
                            <br> {{rating.user?.firstName}}
                          </h6>
                          <!-- Comentario -->
                          <small class="text-body-secondary">{{rating.comment}}</small>
                        </div>
                      </a>
                    </li>
                  }
                </ul>
            
          </div>
        </div>
      </div>
      


    </div>

    
